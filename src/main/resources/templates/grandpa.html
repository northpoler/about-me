<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <title>æè´ºè‡£åˆ—ä¼ </title>
    <meta name="keywords" content="æè´ºè‡£,è´ºè‡£,æè´ºè‡£ç®€ä»‹,æè´ºè‡£åˆ—ä¼ ,ç»§å¤å¼€ä»Š,ç»§å¤å¼€ä»Šå›¾">
    <meta name="description" content="ã€Šç»§å¤å¼€ä»Šã€‹å›¾çš„ä»‹ç»ä»¥åŠå¯¹æè´ºè‡£åŒå¿—çš„ç®€ä»‹ã€‚">
    <meta th:include="top :: top"/>
    <style>
        .layui-card-header{
            font-weight: bold;
            font-size: large;
            text-align: center;
            color: deeppink;
            background-color: lightcyan;
        }
        .layui-card-body{
            font-size: large;
            background-color: lightcyan;
        }
    </style>
</head>
<body style="background-color: lightgoldenrodyellow">

<div class="layui-row">
    <div class="layui-col-md6 layui-col-md-offset3">
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-picture"></i>  å…¨å›¾æ¦‚è§ˆ
            </div>
            <div class="layui-card-body">
                <img alt="ã€Šç»§å¤å¼€ä»Šå›¾ã€‹" th:src="@{../static/image/grandpa.jpg}" style="width: 100%"/>
                <br/><br/>
                <a th:href="@{../static/image/li_hechen.jpg}" download="ã€Šç»§å¤å¼€ä»Šã€‹(æè´ºè‡£åŒå¿—çºªå¿µå›¾)">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="text-decoration: underline;color: deeppink">ç‚¹å‡»ä¸‹è½½ã€Šç»§å¤å¼€ä»Šã€‹åŸå›¾</span>

                </a>
                <br>
                <p style="color: grey;font-size: small">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <i class="layui-icon layui-icon-tips" style="font-size: small"></i>
                    è‹¥ç”¨å¾®ä¿¡ç‚¹å‡»æ— ååº”ï¼Œå¯ä»¥ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ä¸‰ä¸ªå°ç‚¹ï¼Œé€‰æ‹©â€œåœ¨æµè§ˆå™¨æ‰“å¼€â€ï¼Œå†ä¸‹è½½å³å¯</p>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-flag"></i>  åˆ¶å›¾æ„ä¹‰
            </div>
            <div class="layui-card-body">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ­¤å›¾å®šç¨¿çš„å¹´ä»½æ˜¯2019ï¼Œæ—¶å€¼ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹70å‘¨å¹´ã€‚</p>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æè´ºè‡£åŒå¿—æ˜¯ä¸€åä¼˜ç§€çš„å…šå‘˜ï¼Œä¸ºç¥–å›½åšè¿‡å·¨å¤§è´¡çŒ®ï¼Œç‰¹åˆ¶å›¾ä»¥çºªå¿µã€‚</p>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-survey"></i>  æ ‡é¢˜é‡Šä¹‰
            </div>
            <div class="layui-card-body" style="font-size: large">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€œç»§å¤å¼€ä»Šâ€ï¼ŒæŒ‡ç»§æ‰¿å’Œå¼˜æ‰¬å…ˆäººçš„ç²¾ç¥å’Œäº‹ä¸šï¼Œå¼€æ‹“å½“ä»Šçš„äº‹ä¸šå’Œæœªæ¥çš„é“è·¯ã€‚</p>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å›¾ä¸­ï¼Œä¸‡é‡Œé•¿åŸæ˜¯â€œå¤â€ï¼Œå›½æ——å…šå¾½æ˜¯â€œä»Šâ€;æ¯›æ³½ä¸œå’Œæè´ºè‡£åŒå¿—æ˜¯â€œå¤â€ï¼Œæˆ‘ä»¬æ˜¯â€œä»Šâ€ã€‚</p>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-layouts"></i>  æ„å›¾è¯´æ˜
            </div>
            <div class="layui-card-body">
                <img alt="70å‘¨å¹´æ´»åŠ¨æ ‡è¯†" th:src="@{../static/image/ruler.jpg}" style="width: 100%"/>
                <br><br>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€å®ä½“ç…§ç‰‡é«˜åº¦ä¸º70cmï¼Œè±¡å¾ç€å»ºå›½70å‘¨å¹´ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€æ•´å›¾ä¸­å¿ƒæœ‰ä¸ªå­—ï¼šæï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€æ•´å›¾ä¸­å¿ƒå‚ç›´çº¿ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡ç»è¿‡æ ‡é¢˜ä¸­å¿ƒã€é•¿åŸçƒ½ç«å°ä¸­å¿ƒã€å…šå¾½ä¸­å¿ƒï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4ã€æ•´å›¾ä¸­å¿ƒæ°´å¹³çº¿ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ç»è¿‡æè´ºè‡£è‚–åƒä¸­å¿ƒã€æ¯›æ³½ä¸œè‚–åƒåº•éƒ¨ã€æ¯›æ³½ä¸œåè®³åº•éƒ¨ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5ã€ä¸»æ ‡é¢˜ä¸Šæ²¿ã€å»ºå›½70å‘¨å¹´æ´»åŠ¨æ ‡è¯†ä¸Šæ²¿ã€æ¯›æ³½ä¸œè‚–åƒé¡¶éƒ¨åœ¨åŒä¸€æ°´å¹³çº¿ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6ã€ä¸»æ ‡é¢˜ä¸‹æ²¿ã€å»ºå›½70å‘¨å¹´æ´»åŠ¨æ ‡è¯†ä¸‹æ²¿ã€æ¯›æ³½ä¸œè‚–åƒçœ‰é¡¶åœ¨åŒä¸€æ°´å¹³çº¿ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7ã€æè´ºè‡£è‚–åƒä¸­å¿ƒå’Œäº”æ˜Ÿçº¢æ——æœ€å¤§æ˜Ÿä¸­å¿ƒåœ¨åŒä¸€å‚ç›´çº¿ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8ã€äº”æ˜Ÿçº¢æ——æœ€å¤§æ˜Ÿå’Œå…šå¾½ä¸‹æ²¿åœ¨åŒä¸€æ°´å¹³çº¿ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9ã€æè´ºè‡£è‚–åƒä¸­å¿ƒå’Œæ¯›æ³½ä¸œåè®³ä¸‹æ²¿åœ¨åŒä¸€æ°´å¹³çº¿ï¼›
                </p>
                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10ã€æ¯›æ³½ä¸œè‚–åƒä¸­å¿ƒå’Œå³ä¸‹è§’ä¸»é¢˜é‡Œæè´ºè‡£çš„â€œæâ€åœ¨åŒä¸€å‚ç›´çº¿ã€‚
                </p>
                <i style="color: grey;font-size: small">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…¶ä»–ç»†èŠ‚ä¸ä¸€ä¸€æŒ‡å‡ºã€‚</i>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-search"></i>  ç»†èŠ‚è¯´æ˜
            </div>
            <div class="layui-card-body">

                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ã€Šç»§å¤å¼€ä»Šã€‹å›¾çš„å·¦ä¸Šè§’æ˜¯â€œåº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹70å‘¨å¹´æ´»åŠ¨æ ‡è¯†â€ã€‚</p>
                <img alt="70å‘¨å¹´æ´»åŠ¨æ ‡è¯†" th:src="@{../static/image/symbol.jpg}" style="width: 100%"/>

                <p>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æè´ºè‡£åŒå¿—èƒ¸å‰æœ‰ä¸¤ä¸ªå¾½ç« ï¼Œå·¦è¾¹æ˜¯â€œæŠ—ç¾æ´è¶Šçºªå¿µç« â€ï¼Œå³è¾¹æ˜¯â€œå…šå‘˜å¾½ç« â€ã€‚
                    <br>
                    <i style="color: grey;font-size: small">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸ºåæœŸæ·»åŠ ï¼Œç”¨ä»¥çºªå¿µæè´ºè‡£åŒå¿—çš„äº‹è¿¹ã€‚</i>
                </p>
                <img alt="å¾½ç« " th:src="@{../static/image/dedal.jpg}" style="width: 100%"/>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-tree"></i>  å®¶æ—è°±ç³»
            </div>
            <div class="layui-card-body">
                <img alt="ã€Šä¸–ç³»å›¾ã€‹" th:src="@{../static/image/shixi.png}" style="width: 100%"/>
                <br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: medium"><i class="layui-icon layui-icon-tips"></i>
                    æœ¬ä¸–ç³»å›¾è‡ªã€æè´ºè‡£ã€‘èµ·å§‹ï¼Œä½äºä¸–ç³»é¡¶éƒ¨æ­£ä¸­ã€‚æ­£ä¸‹æ–¹ä¸ºå«¡é•¿å­ï¼Œå«¡é•¿å­å³ä¾§ä¸ºä½™å­ï¼Œå·¦ä¾§ä¸ºå…¶å¥³ï¼ŒæŒ‰è¯è¾°æ¬¡åºå‘ä¸¤è¾¹é™åºæ’åˆ—ã€‚ä¼´ä¾£å‡å½•å…¥æœ¬è°±ï¼Œä½äºå·¦ä¾§ã€‚</span>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-carousel"></i>  ç…§ç‰‡æ‹¾å¿†
            </div>
            <div class="layui-card-body">
                å•äººç…§ <i class="layui-icon layui-icon-username"></i><br/>
                <img alt="ã€Šå•äººç…§ã€‹" th:src="@{../static/image/lifephoto01.jpg}" style="width: 100%"/>
                <br/><br/>åˆç…§ <i class="layui-icon layui-icon-user"></i><br/>
                <img alt="ã€Šåˆç…§ã€‹" th:src="@{../static/image/lifephoto02.jpg}" style="width: 100%"/>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-location"></i>  äººç”Ÿè½¨è¿¹
            </div>
            <div class="layui-card-body">

                <ul class="layui-timeline">
                    <li th:each="line : ${lines}" class="layui-timeline-item">
                        <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                        <div class="layui-timeline-content layui-text">
                            <h3 class="layui-timeline-title" th:utext ="${line.occurTime}"></h3>
                            <p th:utext="${line.content}"></p>
                        </div>
                    </li>
                </ul>
                <button type="button" class="layui-btn layui-btn-radius layui-btn-danger" id="correct">
                    çº é”™
                </button>
                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" id="add">
                    æ·»åŠ 
                </button>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-edit"></i>  å†™åœ¨æœ€å
            </div>
            <div class="layui-card-body" style="text-align: center;letter-spacing: 5px">
                <img alt="è‚–åƒ" th:src="@{../static/image/portrait.jpg}" style="width: 100%"/>
            </div>
        </div>
        <div style="text-align: center" id="like_div">
            <br/>
            <button class="layui-btn layui-btn-lg layui-btn-radius layui-btn-normal" id="like_btn" onclick="like()">
               çŒ® ğŸ’ <span id="like" style="color: yellow"></span> ğŸ’ èŠ±</button>
            <br/><br/><br/>
        </div>
        <div>
            <img alt="åº•å›¾" th:src="@{../static/image/underground.jpg}" style="width: 100%"/>
        </div>
    </div>
</div>

</body>
<script type="text/javascript">

    var message = [[${likes}]];
    $("#like").text(message);
    var userLikes = 0;
    layui.use('layer', function () {
        var layer = layui.layer;
    });

    $("#add").click(function () {
        layer.open({
            type : 2,
            title : "æ·»åŠ ",
            area : [ '400px', '330px' ],
            shade : 0,
            offset : "5px",
            shadeClose : false,
            content : "/timeline/add",
            btn:['ç¡®å®š','å–æ¶ˆ'],
            yes:function(index,layero){
                var body = top.layer.getChildFrame('body',index);
                var content = body.find('#content').val();
                if (content==''){
                    layer.msg(
                        'å†…å®¹è¿˜æœªå¡«å†™',
                        {
                            offset: '100px',
                            anim: 0,
                            time: 1000,
                            icon:2
                        }
                    );
                    return false;
                }
                var iframeWin = window[layero.find('iframe')[0]['name']]; //å¾—åˆ°iframeé¡µçš„çª—å£å¯¹è±¡ï¼Œæ‰§è¡Œiframeé¡µçš„æ–¹æ³•ï¼šiframeWin.method();
                console.log(body.find('#classId').val());
                $.ajax({
                    url:"/timeline/insert",
                    type:'post',
                    data:{
                        'occurTime':body.find('#occurTime').val(),
                        'content':body.find('#content').val(),
                        'contributor':body.find('#contributor').val(),
                        'mark':'2'
                    },
                    dataType:'json',
                    success:function(data){
                        if (data.code == 0) {
                            layer.msg(data.msg,{
                                offset: '10px',
                                icon:1,
                                time:1000
                            },function(){
                                parent.layer.close(index)
                            });
                        } else if (data.code == 500) {
                            layer.msg(data.msg,{
                                icon:2,
                                time:1500
                            },function(){});
                        }
                    }
                });
            },
            btn2 : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });
                return false;
            },
            closeBtn : 1,
            btnAlign:'c',
            success : function(layero, index) {

            },
            cancel : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });

                return false;
            },
            end : function() {
                layer.closeAll();
                /*location.reload();*/
            }
        });
    });

    $("#correct").click(function () {
        layer.open({
            type : 2,
            title : "çº é”™",
            area : [ '400px', '300px' ],
            shade : 0,
            offset : "5px",
            shadeClose : false,
            content : "/timeline/correct",
            btn:['ç¡®å®š','å–æ¶ˆ'],
            yes:function(index,layero){
                var body = top.layer.getChildFrame('body',index);
                var content = body.find('#content').val();
                if (content==''){
                    layer.msg(
                        'å†…å®¹è¿˜æœªå¡«å†™',
                        {
                            offset: '100px',
                            anim: 0,
                            time: 1000,
                            icon:2
                        }
                    );
                    return false;
                }
                var iframeWin = window[layero.find('iframe')[0]['name']]; //å¾—åˆ°iframeé¡µçš„çª—å£å¯¹è±¡ï¼Œæ‰§è¡Œiframeé¡µçš„æ–¹æ³•ï¼šiframeWin.method();
                console.log(body.find('#classId').val());
                $.ajax({
                    url:"/timeline/insert",
                    type:'post',
                    data:{
                        'content':body.find('#content').val(),
                        'contributor':body.find('#contributor').val(),
                        'mark':'3'
                    },
                    dataType:'json',
                    success:function(data){
                        if (data.code == 0) {
                            layer.msg(data.msg,{
                                offset: '10px',
                                icon:1,
                                time:1000
                            },function(){
                                parent.layer.close(index)
                            });
                        } else if (data.code == 500) {
                            layer.msg(data.msg,{
                                icon:2,
                                time:1500
                            },function(){});
                        }
                    }
                });
            },
            btn2 : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });

                return false;
            },
            closeBtn : 1,
            btnAlign:'c',
            success : function(layero, index) {

            },
            cancel : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });

                return false;
            },
            end : function() {
                layer.closeAll();
                /*location.reload();*/
            }
        });
    });

    var clickTime = new Date().getTime();

    function like() {
        var now = new Date().getTime();
        if (now-clickTime>1000){
            userLikes++;
            layer.msg(
                'å‘æè´ºè‡£åŒå¿—çŒ®äº†'+userLikes+'æœµé²œèŠ±ï¼',
                {
                    offset: '100px',
                    anim: 0,
                    time: 1000,
                    icon:1
                }
            );
            var test = $("#like").text();
            var before = parseInt(test);
            $.ajax({
                type: 'GET',
                dataType: 'json',
                url: '/like/insert',
                data: {"count": before},
                cache: false,
                async: true,
                success: function (data) {
                    $("#like").text(data);
                }
            });
        }
    }

    $("#like_btn").click(function(e){
        var now = new Date().getTime();
        if (now-clickTime>1000){
            var tem="<p class='show'>ğŸ’</p>";
            var x=e.pageX;
            var y=e.pageY;
            console.log(x);
            console.log(y);
            $(this).append(tem);
            $(".show").css({
                "z-index": 9999,
                'position':'absolute',
                'top':y-20,
                'left':x,
                'color':'yellow'
            });
            $(".show").animate({
                'top':y-300,
                'opacity':0,
                'fontSize':'50px',
            },999,function(){
                $(".show").remove();
            });
            clickTime = now;
        }
    })
</script>
</html>