<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>æè´ºè‡£ | ç®€ä»‹</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" th:href="@{../static/layui/css/layui.css}"/>
    <script type="text/javascript" src="http://hovertree.com/ziyuan/jquery/jquery-1.11.3.min.js"></script>
    <style>
    </style>
</head>
<body style="background-color: lightgoldenrodyellow">

<div class="layui-row">
    <div class="layui-col-md6 layui-col-md-offset3">
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-read"></i>  å…¨å›¾æ¦‚è§ˆ
            </div>
            <div class="layui-card-body" style="font-size: large">
                <img alt="ã€Šç»§å¤å¼€ä»Šå›¾ã€‹" th:src="@{../static/image/grandpa.jpg}" style="width: 100%"/>
                <br/><br/>
                <a th:href="@{../static/image/Li_HeChen.jpg}" download="ã€Šç»§å¤å¼€ä»Šã€‹(æè´ºè‡£åŒå¿—çºªå¿µå›¾)">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="text-decoration: underline;color: deeppink">ç‚¹å‡»ä¸‹è½½ã€Šç»§å¤å¼€ä»Šã€‹åŸå›¾</span>

                </a>
                <br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: medium"><i class="layui-icon layui-icon-tips"></i>
                    è‹¥ç”¨å¾®ä¿¡ç‚¹å‡»æ— ååº”ï¼Œå¯ä»¥ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ä¸‰ä¸ªå°ç‚¹ï¼Œé€‰æ‹©â€œåœ¨æµè§ˆå™¨æ‰“å¼€â€ï¼Œå†ä¸‹è½½å³å¯ã€‚</span>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-flag"></i>  åˆ¶å›¾æ„ä¹‰
            </div>
            <div class="layui-card-body" style="font-size: large">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ­¤å›¾å®šç¨¿çš„å¹´ä»½æ˜¯2019ï¼Œæ—¶å€¼ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹70å‘¨å¹´ã€‚</p>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æè´ºè‡£åŒå¿—æ˜¯ä¸€åä¼˜ç§€çš„å…šå‘˜ï¼Œä¸ºç¥–å›½åšè¿‡å·¨å¤§è´¡çŒ®ï¼Œç‰¹åˆ¶å›¾ä»¥çºªå¿µã€‚</p>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-about"></i>  æ ‡é¢˜é‡Šä¹‰
            </div>
            <div class="layui-card-body" style="font-size: large">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€œç»§å¤å¼€ä»Šâ€ï¼ŒæŒ‡ç»§æ‰¿å’Œå¼˜æ‰¬å…ˆäººçš„ç²¾ç¥å’Œäº‹ä¸šï¼Œå¼€æ‹“å½“ä»Šçš„äº‹ä¸šå’Œæœªæ¥çš„é“è·¯ã€‚</p>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å›¾ä¸­ï¼Œä¸‡é‡Œé•¿åŸæ˜¯â€œå¤â€ï¼Œå›½æ——å…šå¾½æ˜¯â€œä»Šâ€;æ¯›æ³½ä¸œå’Œæè´ºè‡£åŒå¿—æ˜¯â€œå¤â€ï¼Œæˆ‘ä»¬æ˜¯â€œä»Šâ€ã€‚</p>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-search"></i>  ç»†èŠ‚è¯´æ˜
            </div>
            <div class="layui-card-body" style="font-size: large">
                <ol>
                    <li>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€å›¾çš„å·¦ä¸Šè§’æ˜¯â€œåº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹70å‘¨å¹´æ´»åŠ¨æ ‡è¯†â€ï¼›
                    </li>
                    <li>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€æè´ºè‡£åŒå¿—èƒ¸å‰æœ‰ä¸¤ä¸ªå¾½ç« ï¼Œå·¦è¾¹çš„æ˜¯â€œæŠ—ç¾æ´è¶Šçºªå¿µç« â€ï¼Œå³è¾¹æ˜¯â€œå…šå‘˜å¾½ç« â€ã€‚
                    </li>
                </ol>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-tree"></i>  å®¶æ—è°±ç³»
            </div>
            <div class="layui-card-body" style="font-size: large">
                <img alt="ã€Šä¸–ç³»å›¾ã€‹" th:src="@{../static/image/shixi.png}" style="width: 100%"/>
                <br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: medium"><i class="layui-icon layui-icon-tips"></i>
                    æœ¬ä¸–ç³»å›¾è‡ªä½œè€…ç¥–çˆ¶ã€æè´ºè‡£ã€‘èµ·å§‹ï¼Œæ‰€ç”Ÿå­å¥³å‡å½•å…¥æœ¬è°±ã€‚å§‹ç¥–ä½äºä¸–ç³»é¡¶éƒ¨æ­£ä¸­ï¼Œæ­£ä¸‹æ–¹ä¸ºå«¡é•¿å­ï¼Œå«¡é•¿å­å³ä¾§ä¸ºä½™å­ï¼ŒæŒ‰è¯è¾°æ¬¡åºé™åºæ’åˆ—ã€‚å«¡é•¿å­å·¦ä¾§ä¸ºå…¶å§å¦¹ï¼Œä»å³å‘å·¦æŒ‰è¯è¾°æ¬¡åºé™åºæ’åˆ—ã€‚å­å¥³é…å¶å‡å½•å…¥æœ¬è°±ï¼Œä½äºå…¶å·¦ä¾§ï¼Œå¥³ä¹‹å­å¥³æš‚æœªå½•å…¥ã€‚</span>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-picture"></i>  ç…§ç‰‡æ‹¾å¿†
            </div>
            <div class="layui-card-body" style="font-size: large">
                å•äººç…§ï¼š<br/><br/>
                <img alt="ã€Šå•äººç…§ã€‹" th:src="@{../static/image/lifephoto01.jpg}" style="width: 100%"/>
                <br/><br/>åˆç…§ï¼š<br/><br/>
                <img alt="ã€Šåˆç…§ã€‹" th:src="@{../static/image/lifephoto02.jpg}" style="width: 100%"/>
            </div>
        </div>
        <div class="layui-card" style="background-color: lightcyan">
            <div class="layui-card-header" style="font-weight: bold;font-size: large;text-align: center;color: deeppink">
                <i class="layui-icon layui-icon-location"></i>  äººç”Ÿè½¨è¿¹
            </div>
            <div class="layui-card-body" style="font-size: large">

                <ul class="layui-timeline">
                    <li th:each="line : ${lines}" class="layui-timeline-item">
                        <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                        <div class="layui-timeline-content layui-text">
                            <h3 class="layui-timeline-title" th:utext ="${line.occurTime}"></h3>
                            <p th:utext="${line.content}"></p>
                        </div>
                    </li>
                </ul>
                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" id="add">æ·»åŠ æ›´å¤š</button>
            </div>
        </div>
        <div style="text-align: center" id="like_div">
            <br/>
            <span id="like" class="layui-badge"></span><br>
            <button class="layui-btn layui-btn-lg layui-btn-radius layui-btn-normal" onclick="like()">
                ğŸ’ çŒ®èŠ±</button>
            <br/><br/><br/><br/><br/><br/>
        </div>
    </div>
</div>

</body>
<script th:src="@{../static/layui/layui.js}"></script>
<script type="text/javascript">

    var message = [[${likes}]];
    $("#like").text(message);
    var userLikes = 0;
    layui.use('layer', function () {
        var layer = layui.layer;
    });

    $("#add").click(function () {
        layer.open({
            type : 2,
            title : "æ·»åŠ è½¨è¿¹",
            area : [ '400px', '400px' ],
            shade : 0,
            offset : "5px",
            shadeClose : false,
            content : "/timeline/add",
            btn:['ç¡®å®š','å–æ¶ˆ'],
            yes:function(index,layero){
                var body = top.layer.getChildFrame('body',index);
                var iframeWin = window[layero.find('iframe')[0]['name']]; //å¾—åˆ°iframeé¡µçš„çª—å£å¯¹è±¡ï¼Œæ‰§è¡Œiframeé¡µçš„æ–¹æ³•ï¼šiframeWin.method();
                console.log(body.find('#classId').val());
                $.ajax({
                    url:"/timeline/insert",
                    type:'post',
                    data:{
                        'occurTime':body.find('#occurTime').val(),
                        'content':body.find('#content').val(),
                        'contributor':body.find('#contributor').val()
                    },
                    dataType:'json',
                    success:function(data){
                        if (data.code == 0) {
                            layer.msg(data.msg,{
                                offset: '10px',
                                icon:1,
                                time:1000
                            },function(){
                                parent.layer.close(index)
                            });
                        } else if (data.code == 500) {
                            layer.msg(data.msg,{
                                icon:2,
                                time:1500
                            },function(){});
                        }
                    }
                });
            },
            btn2 : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });

                return false;
            },
            closeBtn : 1,
            btnAlign:'c',
            success : function(layero, index) {

            },
            cancel : function() {
                layer.open({
                    type: 1
                    ,title: false //ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
                    ,closeBtn: false
                    ,area: '300px;'
                    ,offset: '100px'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //è®¾å®šä¸€ä¸ªidï¼Œé˜²æ­¢é‡å¤å¼¹å‡º
                    ,btn: ['æ˜¯çš„å…³é—­å®ƒ', 'æˆ‘å†è€ƒè™‘ä¸€ä¸‹']
                    ,yes:function(){
                        layer.closeAll();
                    }
                    ,btnAlign: 'c'
                    ,moveType: 1 //æ‹–æ‹½æ¨¡å¼ï¼Œ0æˆ–è€…1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;text-align:center;font-size:20px;">ç¡®å®šå…³é—­å—~!</div>'

                });

                return false;
            },
            end : function() {
                layer.closeAll();
                /*location.reload();*/
            }
        });
    });

    function like() {
        userLikes++;
        flower()
        layer.msg(
            'å‘æè´ºè‡£åŒå¿—çŒ®äº†'+userLikes+'æœµé²œèŠ±ï¼',
            {
                offset: '100px',
                anim: 0,
                time: 1000,
                icon:1
            }
        );
        var test = $("#like").text();
        var before = parseInt(test);
        $.ajax({
            type: 'GET',
            dataType: 'json',
            url: '/like/insert',
            data: {"count": before},
            cache: false,
            async: true,
            success: function (data) {
                $("#like").text(data);
            }
        });
    }
    function flower(){
        var tem="<p id='flower'>ğŸ’</p>";
        var place = $("#like");
        var x=place.pageX;
        var y=place.pageY;
        $(place).append(tem);
        $("#flower").css({
            "z-index": 9999,
            'position':'absolute',
            'top':y-20,
            'left':x,
            'color':'yellow'
        })
        $("#flower").animate({
            'top':y-300,
            'opacity':0,
            'fontSize':'50px',
        },1000,function(){
            $(place).empty()
        })
    }
/*
    $("#like_div").click(function(e){
        var tem="<p id='flower'>ğŸ’</p>";
        var place = $("#like");
        var x=place.pageX;
        var y=place.pageY;
        $(this).append(tem);
        $("#flower").css({
            "z-index": 9999,
            'position':'absolute',
            'top':y-20,
            'left':x,
            'color':'yellow'
        })
        $("#flower").animate({
            'top':y-300,
            'opacity':0,
            'fontSize':'50px',
        },1000,function(){
            $(this).empty()
        })
    })*/
</script>
</html>