<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <title>éšæ‰‹è®°</title>
    <meta th:include="top :: top"/>
    <style>
        .w-e-text-container{
            height: 500px !important;/*!importantæ˜¯é‡ç‚¹ï¼Œå› ä¸ºåŸdivæ˜¯è¡Œå†…æ ·å¼è®¾ç½®çš„é«˜åº¦300px*/
        }
    </style>
</head>
<body style="background-color: lightgoldenrodyellow;">
<div th:include="head :: head"></div>
<div class="layui-row" style="margin-bottom: 200px;">
    <div class="layui-col-md6 layui-col-md-offset3" style="padding: 0px 20px">
        <div style="text-align: center;margin: 20px 0px">
            <button type="button" id="edit" class="layui-btn layui-btn-lg layui-btn-normal">ç¼–è¾‘å†…å®¹</button>
            <button type="button" id="show" class="layui-btn layui-btn-lg layui-btn-warm layui-hide">é€€å‡ºç¼–è¾‘</button>
            <button type="button" id="save" class="layui-btn layui-btn-lg layui-btn-normal layui-hide">ä¿å­˜æ›´æ”¹</button>
        </div>
        <div id="editor">
            <p>æ­£åœ¨ <b>åŠ è½½ä¸­</b> .......</p>
        </div>
    </div>
</div>
</body>
<script th:src="@{../static/js/editor/wangEditor.min.js}"></script>
<script type="text/javascript">
    layui.use('layer', function () {
        var layer = layui.layer;
    });

    layui.use('util', function(){
        var util = layui.util;

        //æ‰§è¡Œ
        util.fixbar({
            bar1: "<i style=\"font-size: larger;font-weight: bolder\" class=\"layui-icon layui-icon-home\"></i>"
            ,css: {right: "10%", bottom: "10%"}
            ,click: function(type){
                console.log(type);
                if(type === 'bar1'){
                    window.open("/search",'_self');
                }
            }
        });
    });

    var E = window.wangEditor;
    var editor = new E('#editor');
    // ä½¿ç”¨ base64 ä¿å­˜å›¾ç‰‡
    editor.customConfig.uploadImgShowBase64 = true;
    // è‡ªå®šä¹‰é…ç½®é¢œè‰²ï¼ˆå­—ä½“é¢œè‰²ã€èƒŒæ™¯è‰²ï¼‰
    editor.customConfig.colors = [
        '#000000',
        '#666666',
        '#aaaaaa',
        '#ffffff',
        '#ff0000',
        '#ff6600',
        '#ffaa00',
        '#ffff00',
        '#003300',
        '#00aa00',
        '#00ff00',
        '#003300',
        '#000066',
        '#0000aa',
        '#0000ff',
        '#1c487f',
        '#4d80bf',
        '#c24f4a',
        '#8baa4a',
        '#7b5ba1',
        '#46acc8',
        '#f9963b'
    ];
    // è¡¨æƒ…é¢æ¿å¯ä»¥æœ‰å¤šä¸ª tab ï¼Œå› æ­¤è¦é…ç½®æˆä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ª tab çš„é…ç½®
    editor.customConfig.emotions = [
        {
            // tab çš„æ ‡é¢˜
            title: 'é»˜è®¤',
            // type -> 'emoji' / 'image'
            type: 'image',
            // content -> æ•°ç»„
            content: [{
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",
                alt : "[è‰æ³¥é©¬]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",
                alt : "[ç¥é©¬]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",
                alt : "[æµ®äº‘]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif",
                alt : "[ç»™åŠ›]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif",
                alt : "[å›´è§‚]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif",
                alt : "[å¨æ­¦]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif",
                alt : "[ç†ŠçŒ«]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif",
                alt : "[å…”å­]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif",
                alt : "[å¥¥ç‰¹æ›¼]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif",
                alt : "[å›§]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif",
                alt : "[äº’ç²‰]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif",
                alt : "[ç¤¼ç‰©]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif",
                alt : "[å‘µå‘µ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif",
                alt : "[å˜»å˜»]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/laugh.gif",
                alt : "[å“ˆå“ˆ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/14/tza_thumb.gif",
                alt : "[å¯çˆ±]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/kl_thumb.gif",
                alt : "[å¯æ€œ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a0/kbsa_thumb.gif",
                alt : "[æŒ–é¼»å±]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f4/cj_thumb.gif",
                alt : "[åƒæƒŠ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/shamea_thumb.gif",
                alt : "[å®³ç¾]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c3/zy_thumb.gif",
                alt : "[æŒ¤çœ¼]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/29/bz_thumb.gif",
                alt : "[é—­å˜´]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/71/bs2_thumb.gif",
                alt : "[é„™è§†]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/lovea_thumb.gif",
                alt : "[çˆ±ä½ ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9d/sada_thumb.gif",
                alt : "[æ³ª]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/19/heia_thumb.gif",
                alt : "[å·ç¬‘]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8f/qq_thumb.gif",
                alt : "[äº²äº²]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/b6/sb_thumb.gif",
                alt : "[ç”Ÿç—…]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/mb_thumb.gif",
                alt : "[å¤ªå¼€å¿ƒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/17/ldln_thumb.gif",
                alt : "[æ‡’å¾—ç†ä½ ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/98/yhh_thumb.gif",
                alt : "[å³å“¼å“¼]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/zhh_thumb.gif",
                alt : "[å·¦å“¼å“¼]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a6/x_thumb.gif",
                alt : "[å˜˜]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/cry.gif",
                alt : "[è¡°]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/73/wq_thumb.gif",
                alt : "[å§”å±ˆ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9e/t_thumb.gif",
                alt : "[å]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f3/k_thumb.gif",
                alt : "[æ‰“å“ˆæ¬ ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/27/bba_thumb.gif",
                alt : "[æŠ±æŠ±]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7c/angrya_thumb.gif",
                alt : "[æ€’]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/5c/yw_thumb.gif",
                alt : "[ç–‘é—®]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a5/cza_thumb.gif",
                alt : "[é¦‹å˜´]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/88_thumb.gif",
                alt : "[æ‹œæ‹œ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e9/sk_thumb.gif",
                alt : "[æ€è€ƒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/24/sweata_thumb.gif",
                alt : "[æ±—]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7f/sleepya_thumb.gif",
                alt : "[å›°]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6b/sleepa_thumb.gif",
                alt : "[ç¡è§‰]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/90/money_thumb.gif",
                alt : "[é’±]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0c/sw_thumb.gif",
                alt : "[å¤±æœ›]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/cool_thumb.gif",
                alt : "[é…·]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8c/hsa_thumb.gif",
                alt : "[èŠ±å¿ƒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/49/hatea_thumb.gif",
                alt : "[å“¼]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/36/gza_thumb.gif",
                alt : "[é¼“æŒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/dizzya_thumb.gif",
                alt : "[æ™•]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1a/bs_thumb.gif",
                alt : "[æ‚²ä¼¤]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/62/crazya_thumb.gif",
                alt : "[æŠ“ç‹‚]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/h_thumb.gif",
                alt : "[é»‘çº¿]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/yx_thumb.gif",
                alt : "[é˜´é™©]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/nm_thumb.gif",
                alt : "[æ€’éª‚]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/hearta_thumb.gif",
                alt : "[å¿ƒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ea/unheart.gif",
                alt : "[ä¼¤å¿ƒ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/pig.gif",
                alt : "[çŒªå¤´]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d6/ok_thumb.gif",
                alt : "[ok]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/ye_thumb.gif",
                alt : "[è€¶]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_thumb.gif",
                alt : "[good]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c7/no_thumb.gif",
                alt : "[ä¸è¦]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d0/z2_thumb.gif",
                alt : "[èµ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/come_thumb.gif",
                alt : "[æ¥]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/sad_thumb.gif",
                alt : "[å¼±]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/lazu_thumb.gif",
                alt : "[èœ¡çƒ›]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/cake.gif",
                alt : "[è›‹ç³•]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d3/clock_thumb.gif",
                alt : "[é’Ÿ]"
            }, {
                src : "http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1b/m_thumb.gif",
                alt : "[è¯ç­’]"
            }
            ]
        },
        {
            // tab çš„æ ‡é¢˜
            title: 'emoji',
            // type -> 'emoji' / 'image'
            type: 'emoji',
            // content -> æ•°ç»„
            content:"ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ˜Š ğŸ˜‡ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜“ ğŸ˜ª ğŸ˜´ ğŸ™„ ğŸ¤” ğŸ˜¬ ğŸ¤".split(/\s/)
        }
    ];

    $(function () {
        if ($("#username").length === 0){
            $("#editor").html("<p>åœ¨è¿™é‡Œï¼Œå¯ä»¥éšæ—¶è®°å½•<b>ä»»ä½•ä½ æƒ³è®°å½•çš„ä¿¡æ¯</b> .......</p>");
        } else {
            $.ajax({
                type: 'GET',
                dataType: 'json',
                url: '/knowledge/get',
                data: {},
                cache: false,
                async: true,
                success: function (data) {
                    $("#editor").html(data.data);
                }
            });
        }
    });

    $("#edit").click(function () {
        if ($("#username").length === 0){
            alertMsg("è¯·å…ˆç™»å½•ï¼")
            return false;
        }
        editor.create();
        autoSave();
        $("#show").removeClass("layui-hide");
        $("#save").removeClass("layui-hide");
        $("#edit").addClass("layui-hide");
    });

    $("#show").click(function () {
        dangerInquiry('ç¡®å®šç›´æ¥é€€å‡º','æ˜¯çš„','ç¨ç­‰',true,function () {
            window.location.reload();
        });
    });

    //æ¯åŠåˆ†é’Ÿè‡ªåŠ¨ä¿å­˜
    function autoSave() {
        setInterval(function () {
            save();
        }, 30000);
    }

    $("#save").click(function () {
        save();
    });

    //ä¿å­˜
    function save() {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: '/knowledge/save',
            data: {
                content:editor.txt.html()
            },
            cache: false,
            async: true,
            success: function (data) {
                if (data.code==0){
                    layer.msg("ä¿å­˜æˆåŠŸï¼", {offset: '200px', anim: 0, time: 666});
                } else {
                    alertMsg("ä¿å­˜å¤±è´¥ï¼");
                }
            }
        });
    }



    /*// ç¦ç”¨ç¼–è¾‘åŠŸèƒ½
    editor.$textElem.attr('contenteditable', false)

    // å¼€å¯ç¼–è¾‘åŠŸèƒ½
    editor.$textElem.attr('contenteditable', true)*/

</script>
</html>